Brownie v1.14.3 - Python development framework for Ethereum

Compiling contracts...
  Solc version: 0.4.24
  Optimizer: Enabled  Runs: 200
  EVM Version: Byzantium
Generating build data...
 - Orchestrator
 - UFragments
 - IOracle
 - UFragmentsPolicy
 - SafeMathInt
 - UInt256Lib
 - ConstructorRebaseCallerContract
 - RebaseCallerContract
 - IOracle
 - MedianOracle
 - Select
 - SafeMath
 - Ownable
 - ERC20Detailed
 - IERC20
 - SafeMath
 - Ownable
 - Initializable

BadgerSystemProject is the active project.

Launching 'ganache-cli --accounts 100 --hardfork istanbul --fork https://eth-mainnet.alchemyapi.io/v2/67TaLoEIQQoQuydDn4HcFCGgi9Kc5Kn0 --gasLimit 12000000 --mnemonic brownie --port 8545 --chainId 1'...

Running '[0;1;34mscripts/rewards/test_propose_root.py[0;m::[0;1;36mmain[0;m'...
Connecting to Existing Badger ðŸ¦¡ System at deploy-final.json...
RPC Active
Connecting to Existing Digg ðŸ¦¡ System at deploy-final.json...
RPC Active
deployer / owner 0xDA25ee226E534d868f0Dd8a459536b03fEE9079b 0xDA25ee226E534d868f0Dd8a459536b03fEE9079b 0xDA25ee226E534d868f0Dd8a459536b03fEE9079b 0xDA25ee226E534d868f0Dd8a459536b03fEE9079b
Deploy Dev Multisig
('daoDiggTimelock', <brownie.network.contract.ContractContainer object at 0x7f183ce42730>, '0x5A54Ca44e8F5A1A695f8621f15Bfa159a140bB61')
('diggTeamVesting', <brownie.network.contract.ContractContainer object at 0x7f183ce42af0>, '0x124FD4A9bd4914b32c77C9AE51819b1181dbb3D4')
('diggDistributor', <brownie.network.contract.ContractContainer object at 0x7f183ce42b80>, '0x5E79958EfbB8AFdeDB6EC7107110F329e4EAfffA')
('uFragments', <brownie.network.contract.ContractContainer object at 0x7f183ce42d60>, '0x798D1bE841a82a273720CE31c822C61a67a601C3')
('uFragmentsPolicy', <brownie.network.contract.ContractContainer object at 0x7f183f5ad400>, '0x327a78D13eA74145cc0C63E6133D516ad3E974c3')
('constantOracle', <brownie.network.contract.ContractContainer object at 0x7f18413dc550>, '0xed57725991983e407837ce4b3e0f0fa38bd161b6', False)
('cpiMedianOracle', <brownie.network.contract.ContractContainer object at 0x7f18413dc7f0>, '0x57280661EcAB9B2ad0ddac9B5ed824Ae17424A8C', False)
('marketMedianOracle', <brownie.network.contract.ContractContainer object at 0x7f18413dc7f0>, '0x058ec2bf15011095a25670b618a129c043e2162e', False)
('orchestrator', <brownie.network.contract.ContractContainer object at 0x7f183f5ad310>, '0xbd5d9451e004fc495f105ceab40d6c955e4192ba', False)
SmartVesting 0x07c0E4f4C977a29c46Fb26597ea8C9105ca50b42
SmartTimelock 0x82C9E7DC49F800820d37a12a5a17548FE3a3A40b
RewardsEscrow 0xC2Bc5fD13Ce64efD249234C870D64569155609cd
BadgerGeyser 0x51B44fFD22ddEaDdb46E28867aA9988DF919F381
BadgerTree 0x48eb9b000f8c0a60784d0f96092e08efdc1e4876
BadgerHunt 0xC5C8933073B1c682aE07b4bc22d2249c220884bE
SimpleTimelock 0x4e3f56bb996ed91ba8d97ea773d3f818730d1a6f
Controller 0x6354E79F21B56C11f48bcD7c451BE456D7102A36
Sett 0x175586ac3f8A7463499D1019A30120aa6fC67C5f
SettV1 0xE4Ae305b08434bF3D74e0086592627F913a258A9
SettV1.1 0x175586ac3f8A7463499D1019A30120aa6fC67C5f
StakingRewards 0x6daCCed8D6d80b0e93a51A4303961678e8A46Fa5
StakingRewardsSignalOnly 0x752F5C9e91721dc7a7513106fbf249C46439A5EE
StrategyBadgerRewards 0x38b9344fFB931ABA6476198095e088024CdAC527
StrategyBadgerLpMetaFarm 0xB18D0bC54829bdFeAE998b8FE9a8df10953DcAeC
StrategyHarvestMetaFarm 0x17c118416BD713e00037125D85E58abaC60c4A4E
StrategyPickleMetaFarm 0xF6BC36280F32398A031A7294e81131aEE787D178
StrategyCurveGaugeTbtcCrv 0x1989C39Bc167678EAc6e9ADe5D803Cc3523011cf
StrategyCurveGaugeSbtcCrv 0xe3c63D747aca7Fb9E9404a09520D7A2A4feFEEaA
StrategyCurveGaugeRenBtcCrv 0x8B60386a978dFC3241E9112dB3ea009331838846
HoneypotMeme 0x7eCc602743bD50FB01fF60e9288fc532B851afc5
StrategySushiLpOptimizer 0x5435Fc74aeD67C81BB500490A4365AF5e6021bba
StrategySushiBadgerWbtc 0x8D216AaBbdE01449dCb34c1e1365E558F614695c
UFragments 0xFaBec03B04279c6E73F27AaF25866ACc844448Ae
UFragmentsPolicy 0x4750caa4999404cb26ff6db2d0abc09b000122e0
DiggRewardsFaucet 0xa42acbbee5796ad0862fd7340edc25f111cd10eb
DiggSett 0x0f92ca0fb07e420b2fed036a6bb023c6c9e49940
StrategyDiggRewards 0x5543e25B6Eea80D38863023392a33D976d769e5C
StrategySushiDiggWbtcLpOptimizer 0x16626Fd20b8e1541Fdb85D9e63DEf368b374fa75
StrategyDiggLpMetaFarm 0xd0b1e9f652019B993dacdd97011557ec3b2B6019
DiggDistributor 0x9a7d4078068ebb39ffe471898212353cf661580c
SimpleTimelockWithVoting 0xa494351C6f392908321Ea90665628f7f521FE809
DiggSeeder 0xfcC357420368195eE1F4B387d9d4335d26b0695F
Run at 1616875822
===== Loading Past Rewards rewards-1-0x0b7a485b22cafbd00467f5d73f8453f087020454e
8169edf3fc6e3ad9a3fadfc.json =====
Downloading file from s3: badger-tree.json
[20:10:26] {                                                     aws_utils.py:39
               'ResponseMetadata': {                                            
                   'RequestId': 'MSA87GVY7P0S10GM',                             
                   'HostId':                                                    
           'uP8u4kb8hr/qE4xrdss08hHACQYaCI+L9zJPdgmml6xpjz3WbHgF                
                   'HTTPStatusCode': 200,                                       
                   'HTTPHeaders': {                                             
                       'x-amz-id-2':                                            
           'uP8u4kb8hr/qE4xrdss08hHACQYaCI+L9zJPdgmml6xpjz3WbHgF                
                       'x-amz-request-id': 'MSA87GVY7P0S10GM',                  
                       'date': 'Sat, 27 Mar 2021 20:10:27 GMT',                 
                       'last-modified': 'Sat, 27 Mar 2021                       
           16:34:32 GMT',                                                       
                       'etag':                                                  
           '"a4defd6f46db82bc719439f4dcddf8b5-5"',                              
                       'x-amz-version-id':                                      
           'xwDw_2uglhyBnOSM6ZQOdPul3AXQYeFK',                                  
                       'accept-ranges': 'bytes',                                
                       'content-type': 'binary/octet-stream',                   
                       'content-length': '35741313',                            
                       'server': 'AmazonS3'                                     
                   },                                                           
                   'RetryAttempts': 1                                           
               },                                                               
               'AcceptRanges': 'bytes',                                         
               'LastModified': datetime.datetime(2021, 3, 27,                   
           16, 34, 32, tzinfo=tzutc()),                                         
               'ContentLength': 35741313,                                       
               'ETag': '"a4defd6f46db82bc719439f4dcddf8b5-5"',                  
               'VersionId': 'xwDw_2uglhyBnOSM6ZQOdPul3AXQYeFK',                 
               'ContentType': 'binary/octet-stream',                            
               'Metadata': {},                                                  
               'Body': <botocore.response.StreamingBody object                  
           at 0x7f1838484640>                                                   
           }                                                                    
lastUpdateOnChain  12122215  lastUpdate  12122095

===== Root Updater =====


Calculate rewards for 1100 blocks: 12122096 -> 12123196 

[20:10:47] Processing 13810 balances                                client.py:55
 Fetching Geyser Events 0xa9429271a28f8543efffa136994c0839e7d7bf77
[20:11:02] Processing 27965 stakes                                 client.py:115
           Processing 11636 unstakes                               client.py:116
[20:11:02] Sum of geyser balances: 1692897.3149170915       rewards_utils.py:125
           Fetched 11024 geyser balances                    rewards_utils.py:126
[20:11:05] Queried 203 cream balances                              client.py:410
                                                                                
           Processing 768 balances                                  client.py:55
 Fetching Geyser Events 0x2296f174374508278dc12b806a7f27c87d53ca15
[20:11:06] Processing 1139 stakes                                  client.py:115
           Processing 698 unstakes                                 client.py:116
[20:11:06] Sum of geyser balances: 3705.9762251170832       rewards_utils.py:125
           Fetched 738 geyser balances                      rewards_utils.py:126
[20:11:08] Processing 1042 balances                                 client.py:55
 Fetching Geyser Events 0x10fc82867013fce1bd624fafc719bb92df3172fc
[20:11:10] Processing 1627 stakes                                  client.py:115
           Processing 857 unstakes                                 client.py:116
[20:11:10] Sum of geyser balances: 2506.4530915080004       rewards_utils.py:125
           Fetched 1004 geyser balances                     rewards_utils.py:126
[20:11:11] Processing 681 balances                                  client.py:55
 Fetching Geyser Events 0x085a9340ff7692ab6703f17ab5ffc917b580a6fd
[20:11:13] Processing 1247 stakes                                  client.py:115
           Processing 661 unstakes                                 client.py:116
[20:11:13] Sum of geyser balances: 2399.8414847032163       rewards_utils.py:125
           Fetched 670 geyser balances                      rewards_utils.py:126
[20:11:15] Processing 2949 balances                                 client.py:55
 Fetching Geyser Events 0xa207d69ea6fb967e54baa8639c408c31767ba62d
[20:11:18] Processing 6008 stakes                                  client.py:115
           Processing 2812 unstakes                                client.py:116
[20:11:18] Sum of geyser balances: 0.07812706520456417      rewards_utils.py:125
           Fetched 2759 geyser balances                     rewards_utils.py:126
[20:11:20] Processing 585 balances                                  client.py:55
 Fetching Geyser Events 0xed0b7f5d9f6286d00763b0ffcba886d8f9d56d5e
           Processing 867 stakes                                   client.py:115
           Processing 473 unstakes                                 client.py:116
[20:11:20] Sum of geyser balances: 2556.3462303627475       rewards_utils.py:125
           Fetched 550 geyser balances                      rewards_utils.py:126
[20:11:22] Processing 724 balances                                  client.py:55
 Fetching Geyser Events 0x612f681bcd12a0b284518d42d2dbcc73b146eb65
[20:11:23] Processing 949 stakes                                   client.py:115
           Processing 593 unstakes                                 client.py:116
[20:11:23] Sum of geyser balances: 0.003160109764287818     rewards_utils.py:125
           Fetched 690 geyser balances                      rewards_utils.py:126
[20:11:24] Processing 1294 balances                                 client.py:55
 Fetching Geyser Events 0xb5b654efba23596ed49fade44f7e67e23d6712e7
[20:11:26] Processing 2601 stakes                                  client.py:115
           Processing 1118 unstakes                                client.py:116
[20:11:26] Sum of geyser balances: 0.10050878347051413      rewards_utils.py:125
           Fetched 1256 geyser balances                     rewards_utils.py:126
[20:11:30] Processing 5429 balances                                 client.py:55
[20:11:32] Processing 1462 balances                                 client.py:55
 Fetching Geyser Events 0x0194b5fe9ab7e0c43a08acbb771516fc057402e7
[20:11:33] Processing 2507 stakes                                  client.py:115
           Processing 1173 unstakes                                client.py:116
[20:11:33] Sum of geyser balances: 4.8626247127e-08         rewards_utils.py:125
           Fetched 1394 geyser balances                     rewards_utils.py:126
[20:11:35] Processing 1288 balances                                 client.py:55
 Fetching Geyser Events 0x7f6fe274e172ac7d096a7b214c78584d99ca988b
[20:11:37] Processing 2279 stakes                                  client.py:115
           Processing 989 unstakes                                 client.py:116
[20:11:37] Sum of geyser balances: 6.2193919449e-08         rewards_utils.py:125
           Fetched 1233 geyser balances                     rewards_utils.py:126
[20:13:21] 15237                                                    boost.py:118
           7001                                                     boost.py:119
           6252                                                     boost.py:124
           21064                                                    boost.py:125
           1379                                                     boost.py:126
           23639                                                    boost.py:131
           23639                                                    boost.py:137
[20:13:21] Processing rewards for native.badger             calc_stakes_v2.py:22
  [0;2;37mFile [0;1;35m"brownie/_cli/run.py"[0;2;37m, line [0;1;34m49[0;2;37m, in [0;1;36mmain[0;m
    return_value, frame = run(
  [0;2;37mFile [0;1;35m"brownie/project/scripts.py"[0;2;37m, line [0;1;34m103[0;2;37m, in [0;1;36mrun[0;m
    return_value = f_locals[method_name](*args, **kwargs)
  [0;2;37mFile [0;1;35m"./scripts/rewards/test_propose_root.py"[0;2;37m, line [0;1;34m19[0;2;37m, in [0;1;36mmain[0;m
    rootProposed = run_action(
  [0;2;37mFile [0;1;35m"./assistant/rewards/rewards_assistant.py"[0;2;37m, line [0;1;34m323[0;2;37m, in [0;1;36mrun_action[0;m
    return rootUpdater(
  [0;2;37mFile [0;1;35m"./assistant/rewards/rewards_assistant.py"[0;2;37m, line [0;1;34m261[0;2;37m, in [0;1;36mrootUpdater[0;m
    rewards_data = generate_rewards_in_range(
  [0;2;37mFile [0;1;35m"./assistant/rewards/rewards_assistant.py"[0;2;37m, line [0;1;34m165[0;2;37m, in [0;1;36mgenerate_rewards_in_range[0;m
    geyserRewards = calc_geyser_rewards(
  [0;2;37mFile [0;1;35m"./assistant/rewards/rewards_assistant.py"[0;2;37m, line [0;1;34m43[0;2;37m, in [0;1;36mcalc_geyser_rewards[0;m
    geyserRewards = calc_geyser_snapshot(
  [0;2;37mFile [0;1;35m"./assistant/rewards/calc_stakes_v2.py"[0;2;37m, line [0;1;34m26[0;2;37m, in [0;1;36mcalc_geyser_snapshot[0;m
    startTime = web3.eth.getBlock(startBlock)["timestamp"]
  [0;2;37mFile [0;1;35m"web3/eth.py"[0;2;37m, line [0;1;34m217[0;2;37m, in [0;1;36mgetBlock[0;m
    result = self.web3.manager.request_blocking(
  [0;2;37mFile [0;1;35m"web3/manager.py"[0;2;37m, line [0;1;34m153[0;2;37m, in [0;1;36mrequest_blocking[0;m
    raise ValueError(response["error"])
[0;1;31mValueError[0;m: {'message': 'Invalid JSON RPC response: ""', 'code': -32000, 'data': {'stack': 'Error: Invalid JSON RPC response: ""\n    at Object.InvalidResponse (/usr/lib/node_modules/ganache-cli/build/ganache-core.node.cli.js:55:2111128)\n    at t.a.onreadystatechange (/usr/lib/node_modules/ganache-cli/build/ganache-core.node.cli.js:63:41247)\n    at t.e.dispatchEvent (/usr/lib/node_modules/ganache-cli/build/ganache-core.node.cli.js:33:56389)\n    at t._setReadyState (/usr/lib/node_modules/ganache-cli/build/ganache-core.node.cli.js:63:46330)\n    at t._onHttpRequestError (/usr/lib/node_modules/ganache-cli/build/ganache-core.node.cli.js:63:50010)\n    at ClientRequest.<anonymous> (/usr/lib/node_modules/ganache-cli/build/ganache-core.node.cli.js:63:47500)\n    at ClientRequest.emit (events.js:314:20)\n    at TLSSocket.socketOnEnd (_http_client.js:458:9)\n    at TLSSocket.emit (events.js:326:22)\n    at endReadableNT (_stream_readable.js:1241:12)\n    at processTicksAndRejections (internal/process/task_queues.js:84:21)', 'name': 'Error'}}
Terminating local RPC client...
